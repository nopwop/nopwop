!function(e){if(!("nopwopPostsWithCat"in e)){const o=document;function a(e,t){return fetch(`/wp-json/wp/v2/posts?categories=${e}&per_page=${t||50}&_fields=id,featured_media,title,link,excerpt`).then(e=>e.json())}function l(e,r,s){let t=null;var n;t=r.featured_media&&0!=r.featured_media?(n=r.featured_media,fetch(`/wp-json/wp/v2/media/${n}`).then(e=>e.json())):Promise.resolve(),t.then(function(n){let i=o.createElement("div");if(i.classList.add("npwp-post-card"),n||s){let e=o.createElement("div");e.classList.add("npwp-col-1");let t=o.createElement("img");t.classList.add("npwp-thumbnail"),t.src=n?n.media_details.sizes.thumbnail.source_url:s,t.setAttribute("width","64px"),e.appendChild(t),i.appendChild(e)}{let e=o.createElement("div");e.classList.add("npwp-col-2");let t=o.createElement("a");t.classList.add("npwp-title-anchor"),t.href=r.link,t.textContent=r.title.rendered;let n=o.createElement("div");n.classList.add("npwp-excerpt"),n.innerHTML=r.excerpt.rendered,e.appendChild(t),e.appendChild(n),i.appendChild(e)}e.appendChild(i)})}function n(e){let t=o.createElement("p");t.classList.add("npwp-post-container"),e.parentElement.insertBefore(t,e);var n=e.getAttribute("name"),i=e.getAttribute("slug"),r=e.getAttribute("categoryId");let s=e.getAttribute("defaultImg");return r?a(r).then(function(e){e&&e.forEach(function(e){l(t,e,s)})}):i?fetch(`/wp-json/wp/v2/categories?slug=${i}&_fields=id,name,link,count`).then(e=>e.json()).then(function(e){return e&&0<e.length?a(e[0].id):Promise.resolve()}).then(function(e){e&&e.forEach(function(e){l(t,e,s)})}):n?fetch(`/wp-json/wp/v2/categories?search=${n}&_fields=id,name,link,count`).then(e=>e.json()).then(function(e){return e&&0<e.length?a(e[0].id):Promise.resolve()}).then(function(e){e&&e.forEach(function(e){l(t,e,s)})}):(n=function(e){let t=o.createElement("div");return t.classList.add("npwp-err-msg"),t.textContent="nopwop: "+e,t}("script タグにカテゴリの指定が見つかりません"),t.appendChild(n)),t}!function(t){let n=o.getElementsByTagName("head");if(0<n.length){let e=o.createElement("link");e.rel="stylesheet",e.href=t,n[0].appendChild(e)}}("nopwop-posts-with-category.css"),window.addEventListener("DOMContentLoaded",e=>{!function(){let e=o.querySelectorAll("script");e.forEach(e=>{let t=e.getAttribute("src");t&&-1!=t.indexOf("nopwop-posts-with-category")&&n(e)})}()}),e.nopwopPostsWithCat={render:function(){}}}}(this);